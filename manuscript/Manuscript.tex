\documentclass{write_paper} 
\usepackage{amsmath}
\usepackage{ctex}
\usepackage{url}
%\usepackage{algorithm}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{algpseudocode}
\usepackage{subfigure}
\usepackage{epsfig}
\usepackage[utf8]{inputenc}
\usepackage[linesnumbered, ruled, vlined]{algorithm2e}
\usepackage{amsmath}

\usepackage{tikz}
\usepackage{fontspec}
\usetikzlibrary{positioning, arrows.meta}

\setmainfont{Segoe UI Emoji}  % Windows æ¨è
% \setmainfont{Noto Color Emoji}  % Linux æ¨è
 


\usepackage[hidelinks]{hyperref}
\hypersetup{
  colorlinks=true,
  linkcolor=blue,
  filecolor=magenta,      
  urlcolor=blue,
  citecolor=blue,
}
\makeatletter
\@ifundefined{newblock}{\def\newblock{\hskip .11em plus .33em minus .07em}}{}
\makeatother

\usepackage{enumitem}
\makeatletter
\renewcommand\section{\@startsection {section}{1}{\z@}%
                                   {-1ex \@plus -1ex \@minus -.1ex}%
                                   {1 ex \@plus.1ex}%
                                   {\normalfont\large\bfseries}}
\renewcommand\subsection{\@startsection{subsection}{2}{\z@}%
                                     {-1ex\@plus -1ex \@minus -.1ex}%
                                     {1ex \@plus .1ex}%
                                     {\normalfont \normalsize \bfseries}}
\renewcommand\subsubsection{\@startsection{subsubsection}{3}{\z@}%
                                     {-1ex\@plus -1ex \@minus -.1ex}%
                                     {1ex \@plus .1ex}%
                                     {\normalfont\normalsize\bfseries}}
\makeatother

\renewcommand{\theARTICLETOP}{}
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[LE,RO]{}
\fancyhead[RE,LO]{\scriptsize{è®¡ç®—é‡‘èä¸ä»¿çœŸè¯¾ç¨‹è®ºæ–‡} }
\fancyfoot[CE,CO]{\leftmark}
\cfoot{\thepage}

\usepackage[T1]{fontenc}
\usepackage{palatino}

\OneAndAHalfSpacedXI
\usepackage{color}
\usepackage{soul}

\DeclareMathOperator{\E}{\mathbb{E}}
\DeclareMathOperator{\R}{\mathbb{R}}
\DeclareMathOperator{\B}{\mathbb{B}}
\DeclareMathOperator{\Z}{\mathbb{Z}}

%%-----------------------------------------
%% å°†ä½œè€…-å¹´ä»½æ”¹ä¸ºæ•°å­—åˆ¶
\usepackage[numbers]{natbib}  % å…³é”®ï¼šnumbersé€‰é¡¹
% \bibpunct{[}{]}{,}{n}{}{,}   % è‹¥éœ€è¦å¯è‡ªè¡ŒæŒ‡å®šæ ‡ç‚¹
%%-----------------------------------------

% å¦‚æœä¹‹å‰æœ‰ \bibpunct è®¾ç½®, è¯·æ³¨é‡Šæ‰æˆ–åˆ é™¤ä»¥å…å†²çª
% \bibpunct[, ]{(}{)}{,}{a}{}{,}%  <-- åŸå…ˆä½œè€…-å¹´ä»½åˆ¶, éœ€è¦æ³¨é‡Šæˆ–åˆ é™¤

\TheoremsNumberedThrough
\EquationsNumberedThrough
\MANUSCRIPTNO{} 
\newtheorem{prop}{{Proposition}}
%\newtheorem{lemma}{{Lemma}}

%\renewcommand{\algorithmicrequire}{{Input:}}
%\renewcommand{\algorithmicensure}{{Output:}}

\newtheorem{implication}{\noindent{Implication}}

\newcommand{\YH}[1]{{\color{blue}#1}}
\newcommand{\JJ}[1]{{\color{black}#1}}
\newcommand{\eat}[1]{}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{xcolor}  % å¯é€‰ï¼šå®šä¹‰é¢œè‰²

\lstset{
  language=Python,             % è®¾ç½®è¯­è¨€
  basicstyle=\ttfamily\tiny, % åŸºæœ¬å­—ä½“é£æ ¼
  numbers=left,               % è¡Œå·ä½ç½®ï¼Œå¯é€‰ right æˆ– none
  numberstyle=\tiny,          % è¡Œå·å­—ä½“
  keywordstyle=\color{blue},  % å…³é”®å­—é¢œè‰²
  commentstyle=\color{gray},  % æ³¨é‡Šé¢œè‰²
  stringstyle=\color{orange}, % å­—ç¬¦ä¸²é¢œè‰²
  backgroundcolor=\color{white}, % èƒŒæ™¯è‰²
  frame=single,               % æ·»åŠ è¾¹æ¡†ï¼Œå¯é€‰ shadowbox/double
  breaklines=true,            % è‡ªåŠ¨æ¢è¡Œ
  captionpos=b,               % æ ‡é¢˜ä½ç½®ï¼Œb æˆ– t
  tabsize=4,                  % tab å®½åº¦
  showstringspaces=false,     % ä¸æ˜¾ç¤ºå­—ç¬¦ä¸²ä¸­çš„ç©ºæ ¼
}

\usepackage{endnotes}
\let\footnote=\endnote
\def\notesname{Endnotes}

\usepackage[symbol]{footmisc}
\renewcommand{\thefootnote}{\fnsymbol{footnote}}

\newcommand{\bs}[1]{\boldsymbol{#1}}
\newcommand{\ml}[1]{\mathcal{#1}}
\newcommand{\mb}[1]{\mathbb{#1}}

\begin{document}

% æ•´é¡µå‚ç›´å±…ä¸­
\vspace*{\fill}

\begin{center}

    \includegraphics[width=0.4\textwidth]{Figures/æ ¡å¾½.png}\\[1cm]
       \Huge \bfseries
      {è®¡ç®—é‡‘èä¸ä»¿çœŸ}\\[0.5cm]
       \Huge \bfseries
      {è¯¾ç¨‹è®ºæ–‡}\\[2cm]
    
    \Large
    \begin{table}[htbp]
    \centering
    \Large
    \begin{tabular}{ll}
   {è®ºæ–‡é¢˜ç›® }: & è®¡ç®—é‡‘èä¸ä»¿çœŸ \\
   {å­¦ç”Ÿå§“å}: & ææ™¶æ™¶ \quad å¼ ç’ \quad æœ±å†¯å©§ \\
   {æŒ‡å¯¼è€å¸ˆ}: & é‚“æ™ºæ–Œ 
    \end{tabular}
    \end{table}

    


\end{center}

\vspace*{\fill}
\newpage





\section{æŠ•èµ„ç»„åˆé€‰æ‹©ä»‹ç»}


P2På€Ÿè´·(peer-to-peer lending lending)æ˜¯ä¸€ç§ä¸ªäººä¹‹é—´ç›´æ¥å€Ÿè´·çš„æ–¹å¼, é€šè¿‡åœ¨çº¿å¹³å°è¿›è¡Œ, æ— éœ€ä¼ ç»Ÿé“¶è¡Œä¸­ä»‹. è¿™ç§åˆ›æ–°çš„èèµ„æ–¹å¼æä¾›äº†ä¸€ä¸ªå¸‚åœº, å€Ÿæ¬¾äººå¯ä»¥å‘å¤šä¸ªè´·æ–¹ç”³è¯·è´·æ¬¾, è´·æ–¹å¯ä»¥é€‰æ‹©ä¸ºè¿™äº›è´·æ¬¾æä¾›å…¨éƒ¨æˆ–éƒ¨åˆ†èµ„é‡‘. è¿™ä¸€æ¨¡å¼åˆ©ç”¨æŠ€æœ¯æ‰‹æ®µç®€åŒ–äº†å€Ÿè´·è¿‡ç¨‹, é€šå¸¸ä¸ºå€Ÿæ¬¾äººå¸¦æ¥æ›´ä½çš„åˆ©ç‡, åŒæ—¶ä¸ºæŠ•èµ„è€…æä¾›æ›´é«˜çš„å›æŠ¥. 

ç›®å‰, å…¨çƒå‡ å¤§å¹³å°ä¸»å¯¼ç€ P2P å€Ÿè´·é¢†åŸŸ, ä¸»è¦åŒ…æ‹¬ LendingClub, Prosper å’Œ Funding Circle ç­‰. è¿™ç±»å¹³å°é€šè¿‡è¯„ä¼°è´·æ¬¾é¡¹ç›®å’Œå€Ÿæ¬¾äººçš„ FICO åˆ†æ•°, è´·æ¬¾é‡‘é¢å’ŒæœŸé™, å€Ÿæ¬¾äººçš„èµ„äº§, å€ºåŠ¡çŠ¶å†µ, å°±ä¸šç±»å‹ç­‰æ•°æ®, ä¸ºæ¯ç¬”è´·æ¬¾æä¾›é£é™©è¯„çº§. å…¶ä¸­, LendingClub æ˜¯ç¾å›½æœ€å¤§çš„ P2P å€Ÿè´·å¹³å°ä¹‹ä¸€, æä¾›ä¸ªäººè´·æ¬¾å’ŒæŠ•èµ„æœºä¼š. æœ¬æ–‡ä½¿ç”¨æ¥è‡ª LendingClub çš„å…¬å…±æ•°æ®é›†ï¼ˆæ¶µç›– 2007--2018 å¹´çš„è´·æ¬¾è®°å½•ï¼‰, å°†è´·æ¬¾å±æ€§è½¬åŒ–ä¸ºè¿çº¦æ¦‚ç‡ä½œä¸ºåç»­å»ºæ¨¡ä¾æ®. 

ä¸ºäº†å®ç°è´·æ¬¾æŠ•èµ„ç»„åˆçš„å¤šå…ƒåŒ–, æŠ•èµ„è€…å¯ä¾æ®è‡ªèº«çš„é£é™©åå¥½ä»ä¸åŒé£é™©ç­‰çº§çš„è´·æ¬¾ä¸­è¿›è¡Œé€‰æ‹©. ä¸ä¼ ç»Ÿé‡‘èæœºæ„è´·æ¬¾ä¸åŒ, P2P è´·æ¬¾ä¸­çš„æ¯ä½ä¸ªäººæŠ•èµ„è€…å…¶å¯ç”¨äºæŠ•èµ„çš„èµ„é‡‘è¾ƒä¸ºæœ‰é™. å› æ­¤, å¦‚ä½•åœ¨èµ„é‡‘çº¦æŸä¸‹, åŸºäºå€Ÿæ¬¾äººçš„é£é™©ç‰¹å¾è¯„ä¼°æ½œåœ¨å›æŠ¥ä¸é£é™©, é€‰æ‹©åˆé€‚çš„è´·æ¬¾é¡¹ç›®, å¹¶è¿›è¡Œæœ€ä¼˜èµ„é‡‘é…ç½®, æ˜¯ P2P æŠ•èµ„è€…äºŸéœ€è§£å†³çš„é—®é¢˜. 

å¤§é‡å­¦è€…é’ˆå¯¹ P2P ç½‘ç»œè´·æ¬¾çš„æŠ•èµ„ç»„åˆä¼˜åŒ–é—®é¢˜å¼€å±•äº†æ·±å…¥ç ”ç©¶. Wan ç­‰äººå°†è´·æ¬¾æŠ•èµ„ç»„åˆå†³ç­–è½¬åŒ–ä¸ºä¸€ä¸ªåœ¨ç‰¹å®šæ—¶ç‚¹ä¸‹å®ç°æ”¶ç›Šæœ€å¤§åŒ–ä¸é£é™©æœ€å°åŒ–çš„ä¼˜åŒ–é—®é¢˜, å¹¶å¼•å…¥æ··åˆæ²»æ„ˆæ¨¡å‹(mixture cure model,MCM)ä»¥æå‡æŠ•èµ„æ•ˆæœ, æ„å»ºå®ä¾‹é©±åŠ¨çš„æ¨¡å‹å¯¹æŠ•èµ„è€…çš„ç»„åˆå†³ç­–è¿›è¡Œä¼˜åŒ–~\cite{wan2023hybrid}. Guo ç­‰äººåˆ™æå‡ºä¸€ç§åŸºäºå®ä¾‹çš„ P2P æŠ•èµ„ç»„åˆå†³ç­–æ¨¡å‹, ä»é£é™©æœ€å°è§’åº¦å‡ºå‘, åˆ©ç”¨ LendingClub å’Œ Prosper æ•°æ®é›†å®ç°æŠ•èµ„ç»„åˆé…ç½®ä¼˜åŒ–~\cite{guo2016instance}. Ajay ç­‰äººåˆ™å°†è¯¥é—®é¢˜è½¬åŒ–ä¸ºå¤šç›®æ ‡ä¼˜åŒ–æ¨¡å‹, åœ¨è®¡ç®—è´·æ¬¾ç›¸ä¼¼åº¦æ—¶å°†æœŸæœ›å€¼æ¡†æ¶ä¸ä¼ ç»Ÿæ ¸æ–¹æ³•ç»“åˆ, ä¼˜åŒ–ç»“æœä¼˜äºæ—¢æœ‰æ¨¡å‹\cite{byanjankar2021data}.

è´·æ¬¾æŠ•èµ„ç»„åˆä¼˜åŒ–ï¼ˆLoan Portfolio Optimizationï¼‰ä¸ä¼ ç»ŸæŠ•èµ„ç»„åˆä¼˜åŒ–å…·æœ‰ç›¸ä¼¼æ€§, ä½†æ›´å…³æ³¨ä¸è´·æ¬¾ç›¸å…³çš„ç‰¹å®šé£é™©, ä¾‹å¦‚å€Ÿæ¬¾äººä¿¡ç”¨è¯„åˆ†, è´·æ¬¾é‡‘é¢, å€Ÿæ¬¾ç”¨é€”ç­‰å› ç´ å¼•å‘çš„å€Ÿæ¬¾äººé£é™©, è¿çº¦é£é™©ä»¥åŠåˆ©ç‡æ³¢åŠ¨é£é™©. ä¼˜åŒ–ç›®æ ‡æ˜¯é€šè¿‡åˆç†é…ç½®ä¸åŒå€Ÿæ¬¾äººè´·æ¬¾é¡¹ç›®, åœ¨æ§åˆ¶é£é™©çš„åŒæ—¶å®ç°æ”¶ç›Šæœ€å¤§åŒ–. 

åœ¨é£é™©é‡åŒ–æ–¹é¢, VaRï¼ˆValue at Riskï¼‰ä¸ CVaRï¼ˆConditional Value at Riskï¼‰è¢«å¹¿æ³›ç”¨äºè¡¡é‡æŠ•èµ„ç»„åˆçš„é£é™©æ°´å¹³. å…¶ä¸­, VaR è¡¨ç¤ºåœ¨ç½®ä¿¡æ°´å¹³ $\alpha$ ä¸‹, é‡‘èèµ„äº§æˆ–ç»„åˆåœ¨æœªæ¥ç‰¹å®šæŒæœ‰æœŸå†…çš„æœ€å¤§å¯èƒ½æŸå¤±ï¼›è€Œ CVaR åˆ™åˆ»ç”»äº†è¶…è¿‡ VaR æˆªæ­¢ç‚¹çš„æç«¯æŸå¤±çš„æœŸæœ›, å³å¯¹å°¾éƒ¨é£é™©çš„åŠ æƒå¹³å‡, æ˜¯æ›´ç¨³å¥çš„é£é™©è¡¡é‡æŒ‡æ ‡. åœ¨è´·æ¬¾ç»„åˆä¼˜åŒ–ä¸­, CVaR èƒ½å¤Ÿå¸®åŠ©æŠ•èµ„è€…æ›´æœ‰æ•ˆåœ°æ§åˆ¶æ•´ä½“å°¾éƒ¨æŸå¤±é£é™©, ä»è€Œå®ç°æ”¶ç›Šä¸é£é™©çš„æƒè¡¡ä¼˜åŒ–. 


å½“ç„¶å¯ä»¥ã€‚ä¸‹é¢æ˜¯æ¶¦è‰²å¹¶æ‹“å±•åçš„å†…å®¹ï¼Œè¯­è¨€é£æ ¼æ›´åŠ è‡ªç„¶ã€å­¦æœ¯æ€§å¼ºï¼Œæ›´ç¬¦åˆäººç±»æ’°å†™çš„è®ºæ–‡ä¹ æƒ¯ã€‚å†…å®¹æ¶µç›–äº†VaR/CVaRæ–¹æ³•çš„å¼•å…¥åŠ¨å› ã€ä¸‰ç±»æ¨¡å‹çš„æ¼”åŒ–å…³ç³»ä¸æ¯”è¾ƒï¼Œå¢å¼ºäº†æ®µè½é—´çš„é€»è¾‘è¡”æ¥æ€§ï¼Œå¹¶ä¿ç•™äº†å®Œæ•´çš„ LaTeX ç»“æ„ã€‚

---

\section{æ¨¡å‹å»ºç«‹}

\subsection{é£é™©åº¦é‡æ–¹æ³•ç®€ä»‹ï¼šVaR ä¸ CVaR}

åœ¨å®é™…æŠ•èµ„å†³ç­–ä¸­ï¼Œå•çº¯è¿½æ±‚æœŸæœ›æ”¶ç›Šå¾€å¾€éš¾ä»¥æ»¡è¶³é£é™©æ§åˆ¶çš„éœ€æ±‚ã€‚å°¤å…¶æ˜¯åœ¨ P2P è´·æ¬¾ç­‰é«˜é£é™©èµ„äº§é…ç½®ä¸­ï¼ŒæŠ•èµ„è€…æ›´ä¸ºå…³æ³¨æ½œåœ¨æŸå¤±çš„ä¸¥é‡ç¨‹åº¦ä»¥åŠå‘ç”Ÿçš„æ¦‚ç‡ã€‚å› æ­¤ï¼Œåœ¨æ„å»ºä¼˜åŒ–æ¨¡å‹æ—¶ï¼Œå¼•å…¥æœ‰æ•ˆçš„é£é™©åº¦é‡å·¥å…·æ˜¯å¿…è¦çš„ã€‚æœ¬æ–‡ä¸»è¦é‡‡ç”¨çš„ä¸¤ç§é£é™©åº¦é‡æ–¹æ³•ä¸º \textbf{é£é™©ä»·å€¼ï¼ˆValue at Risk, VaRï¼‰} å’Œ \textbf{æ¡ä»¶é£é™©ä»·å€¼ï¼ˆConditional Value at Risk, CVaRï¼‰}ï¼Œå®ƒä»¬åœ¨é‡‘èé£é™©ç®¡ç†ä¸­å…·æœ‰å¹¿æ³›çš„åº”ç”¨ã€‚

\paragraph{VaRï¼ˆValue at Riskï¼‰} æ˜¯å¯¹æœªæ¥æŸä¸€ç»™å®šç½®ä¿¡æ°´å¹³ $\beta$ ä¸‹ï¼Œæœ€å¤§å¯èƒ½æŸå¤±çš„ä¼°è®¡ã€‚å½¢å¼ä¸Šï¼Œè‹¥å°†æŠ•èµ„ç»„åˆçš„æŸå¤±è§†ä¸ºéšæœºå˜é‡ $L$ï¼Œåˆ™ VaR å®šä¹‰ä¸ºï¼š
\[
\text{VaR}_\beta(L) = \inf \left\{ \eta \in \mathbb{R} \mid \mathbb{P}(L \leq \eta) \geq \beta \right\},
\]
å³åœ¨ç½®ä¿¡æ°´å¹³ä¸º $\beta$ æ—¶ï¼ŒæŸå¤±è¶…è¿‡ $\text{VaR}_\beta$ çš„æ¦‚ç‡ä¸è¶…è¿‡ $1 - \beta$ã€‚

\paragraph{CVaRï¼ˆConditional Value at Riskï¼‰} åˆ™åœ¨ VaR çš„åŸºç¡€ä¸Šè¿›ä¸€æ­¥åˆ»ç”»äº†å°¾éƒ¨æŸå¤±çš„ä¸¥é‡ç¨‹åº¦ã€‚å…¶å®šä¹‰ä¸ºåœ¨æŸå¤±è¶…è¿‡ VaR çš„æ¡ä»¶ä¸‹çš„æœŸæœ›æŸå¤±ï¼Œå…·ä½“è¡¨è¾¾ä¸ºï¼š
\[
\text{CVaR}_\beta(L) = \mathbb{E}[L \mid L \geq \text{VaR}_\beta(L)].
\]
ç›¸æ¯” VaRï¼ŒCVaR æ›´åŠ ä¿å®ˆï¼Œèƒ½å¤Ÿæä¾›å…³äºæç«¯é£é™©æ›´å…¨é¢çš„è§†è§’ï¼Œå°¤å…¶é€‚ç”¨äºé£é™©åŒæ¶å‹æŠ•èµ„è€…çš„å†³ç­–æ¨¡å‹ä¸­ã€‚

\subsection*{å†³ç­–å˜é‡}
\[
x_i \in \{0, 1\}, \quad i = 1, 2, \ldots, N
\]
å…¶ä¸­ï¼š
\begin{itemize}
  \item è‹¥ $x_i = 1$ï¼Œè¡¨ç¤ºé€‰æ‹©èµ„åŠ©ç¬¬ $i$ ä¸ªè´·æ¬¾å¯¹è±¡ï¼›
  \item è‹¥ $x_i = 0$ï¼Œè¡¨ç¤ºä¸äºˆèµ„åŠ©ã€‚
\end{itemize}

\subsection*{å‚æ•°è¯´æ˜}
\begin{itemize}
  \item $A_i$ï¼šç¬¬ $i$ ä¸ªè´·æ¬¾çš„ç”³è¯·é‡‘é¢ï¼›
  \item $r_i$ï¼šç¬¬ $i$ ä¸ªè´·æ¬¾çš„å¹´åˆ©ç‡ï¼›
  \item $P_i$ï¼šç¬¬ $i$ ä¸ªè´·æ¬¾çš„è¿çº¦æ¦‚ç‡ï¼›
  \item $B$ï¼šå¯ç”¨äºæŠ•èµ„çš„æ€»é¢„ç®—ï¼›
  \item $R_{\max}$ï¼šå¯æ‰¿å—çš„æœ€å¤§è¿çº¦é£é™©å€¼ï¼›
  \item $G_k$ï¼šç¬¬ $k$ ç±»ä¿¡ç”¨ç­‰çº§å¯¹åº”çš„è´·æ¬¾é›†åˆï¼›
  \item $\alpha_k$ï¼šç¬¬ $k$ ç±»ä¿¡ç”¨ç­‰çº§è´·æ¬¾å¯æŠ•èµ„é‡‘é¢å æ¯”çš„ä¸Šé™ï¼›
  \item $m$ï¼šæœ€å¤šå¯é€‰æ‹©çš„è´·æ¬¾é¡¹ç›®æ•°é‡ï¼ˆå³ Top-$m$ï¼‰ã€‚
\end{itemize}

\subsection*{æ¨¡å‹ä¸€ï¼šæœŸæœ›æ”¶ç›Šæœ€å¤§åŒ–æ¨¡å‹ï¼ˆP2Pï¼‰}
\begin{equation}
\begin{aligned}
\max_{x_i \in \{0,1\}} \quad & \sum_{i=1}^N x_i A_i  r_i(1 - P_i) \\
\text{s.t.} \quad
& \sum_{i=1}^N x_i A_i \le B, \\
& \sum_{i \in G_k} x_i A_i \le \alpha_k B, \quad \forall k, \\
& \sum_{i=1}^N x_i A_i P_i \le R_{\max}, \\
& \sum_{i=1}^N x_i \le m.
\end{aligned}
\label{eq:main_model}
\tag{P2P}
\end{equation}

è¯¥æ¨¡å‹è¾ƒä¸ºåŸºç¡€ï¼Œé€‚ç”¨äºå¯¹é£é™©å®¹å¿åº¦è¾ƒé«˜çš„æŠ•èµ„è€…ï¼Œå…¶ä¸»è¦ç›®æ ‡æ˜¯æœ€å¤§åŒ–æ”¶ç›ŠæœŸæœ›å€¼ï¼Œè€Œéæ§åˆ¶æŸå¤±çš„åˆ†å¸ƒæˆ–æå€¼ã€‚

\subsection*{æ¨¡å‹äºŒï¼šå¼•å…¥ VaR çº¦æŸçš„é£é™©æ§åˆ¶æ¨¡å‹ï¼ˆP2P-VaRï¼‰}
\begin{equation}
\begin{aligned}
\max_{x_i \in \{0,1\}} \quad & \sum_{i=1}^N x_i A_i  r_i(1 - P_i) \\
\text{s.t.} \quad
& \sum_{i=1}^N x_i A_i \le B, \\
& \sum_{i \in G_k} x_i A_i \le \alpha_k B, \quad \forall k, \\
& \sum_{i=1}^N x_i A_i \cdot \tilde{P}_i^{(s)} - \eta \le \mathcal{M} z_s, \quad \forall s = 1,\dots,S, \\
& \sum_{s=1}^S z_s \le (1 - \beta) S, \\
& \sum_{i=1}^N x_i \le m, \\
& z_s \in \{0,1\}, \quad \eta \in \mathbb{R}.
\end{aligned}
\label{eq:var_model}
\tag{P2P-VaR}
\end{equation}

VaR çº¦æŸçš„å¼•å…¥ï¼Œä½¿å¾—æ¨¡å‹èƒ½åœ¨æ•´ä½“æœŸæœ›æ”¶ç›Šä¸æ˜¾è‘—ä¸‹é™çš„å‰æä¸‹ï¼Œå¯¹æç«¯æŸå¤±å‘ç”Ÿçš„é¢‘ç‡è¿›è¡Œé™åˆ¶ï¼Œæé«˜äº†ç»„åˆçš„ç¨³å¥æ€§ã€‚

\subsection*{æ¨¡å‹ä¸‰ï¼šå¼•å…¥ CVaR çº¦æŸçš„ç¨³å¥ä¼˜åŒ–æ¨¡å‹ï¼ˆP2P-CVaRï¼‰}
\begin{equation}
\begin{aligned}
\max_{x_i \in \{0,1\}} \quad & \sum_{i=1}^N x_i A_i r_i(1 - P_i) \\
\text{s.t.} \quad
& \sum_{i=1}^N x_i A_i \le B, \\
& \sum_{i \in G_k} x_i A_i \le \alpha_k B, \quad \forall k, \\
& \xi_s \ge \sum_{i=1}^N x_i A_i \cdot \tilde{P}_i^{(s)} - \eta, \quad \forall s = 1,\dots,S, \\
& \eta + \frac{1}{S(1 - \beta)} \sum_{s=1}^S \xi_s \le \text{CVaR}_{\max}, \\
& \sum_{i=1}^N x_i \le m, \\
& \xi_s \ge 0, \quad \eta \in \mathbb{R}.
\end{aligned}
\label{eq:cvar_model}
\tag{P2P-CVaR}
\end{equation}

ç›¸æ¯”äºæ¨¡å‹äºŒï¼Œè¯¥æ¨¡å‹ä¸ä»…å…³æ³¨æç«¯æŸå¤±å‘ç”Ÿçš„æ¦‚ç‡ï¼Œæ›´è¿›ä¸€æ­¥è¡¡é‡å…¶å¯èƒ½å¸¦æ¥çš„è´¢åŠ¡å½±å“ï¼Œç‰¹åˆ«é€‚ç”¨äºé£é™©åŒæ¶ç¨‹åº¦è¾ƒé«˜çš„æŠ•èµ„è€…æˆ–é«˜å®‰å…¨æ€§éœ€æ±‚çš„å†³ç­–åœºæ™¯ã€‚

\subsection*{æ¨¡å‹æ¼”åŒ–å°ç»“}

ç»¼ä¸Šæ‰€è¿°ï¼Œæœ¬æ–‡æå‡ºçš„ä¸‰ä¸ªæ¨¡å‹æ„æˆäº†ä¸€ä¸ªä»åŸºç¡€åˆ°ç¨³å¥ã€ä»æ”¶ç›Šå¯¼å‘åˆ°é£é™©æ§åˆ¶é€æ­¥å¢å¼ºçš„ä¼˜åŒ–æ¡†æ¶ï¼Œå…·ä½“ç‰¹å¾å¦‚ä¸‹ï¼š

\begin{itemize}
  \item \textbf{æ¨¡å‹ä¸€ï¼ˆP2Pï¼‰}ï¼šä»…è€ƒè™‘æœŸæœ›æ”¶ç›Šæœ€å¤§åŒ–ï¼Œé€‚ç”¨äºé«˜é£é™©åå¥½åœºæ™¯ï¼›
  \item \textbf{æ¨¡å‹äºŒï¼ˆP2P-VaRï¼‰}ï¼šåœ¨ä¿éšœæœŸæœ›æ”¶ç›Šçš„åŒæ—¶ï¼Œæ§åˆ¶æŸå¤±è¶…è¿‡é˜ˆå€¼çš„æ¦‚ç‡ï¼›
  \item \textbf{æ¨¡å‹ä¸‰ï¼ˆP2P-CVaRï¼‰}ï¼šè¿›ä¸€æ­¥å¼•å…¥ CVaR çº¦æŸï¼Œæ§åˆ¶å°¾éƒ¨æŸå¤±çš„å¹³å‡ç¨‹åº¦ï¼Œå®ç°æ›´é«˜æ°´å¹³çš„é£é™©ç¨³å¥æ€§ã€‚
\end{itemize}

æŠ•èµ„è€…å¯æ ¹æ®è‡ªèº«çš„é£é™©åå¥½ä¸æŠ•èµ„ç­–ç•¥ï¼Œé€‰æ‹©ç›¸åº”çš„æ¨¡å‹è¿›è¡Œç»„åˆä¼˜åŒ–ï¼Œä»¥å®ç°æ”¶ç›Šä¸é£é™©çš„åˆç†å¹³è¡¡ã€‚
\section{ç®—æ³•è®¾è®¡}

\subsection{ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•ï¼ˆPSOï¼‰}

ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•ï¼ˆParticle Swarm Optimization, PSOï¼‰æ˜¯ä¸€ç§åŸºäºç¾¤ä½“æ™ºèƒ½çš„éšæœºä¼˜åŒ–æ–¹æ³•ï¼Œç”± Kennedy å’Œ Eberhart äº 1995 å¹´æå‡º~\cite{kennedy1995particle}ã€‚è¯¥ç®—æ³•å—é¸Ÿç¾¤è§…é£Ÿè¡Œä¸ºçš„å¯å‘ï¼Œæ¨¡æ‹Ÿç²’å­åœ¨è§£ç©ºé—´ä¸­åŸºäºä¸ªä½“ç»éªŒä¸ç¾¤ä½“ç»éªŒååŒæœç´¢æœ€ä¼˜è§£çš„è¿‡ç¨‹ã€‚

åœ¨ PSO ä¸­ï¼Œæ¯ä¸ªç²’å­ä»£è¡¨ä¸€ä¸ªæ½œåœ¨è§£ï¼Œå…¶çŠ¶æ€ç”±ä½ç½®ä¸é€Ÿåº¦ä¸¤ä¸ªå‘é‡æè¿°ã€‚ç²’å­åœ¨æœç´¢è¿‡ç¨‹ä¸­æ ¹æ®ä¸ªä½“å†å²æœ€ä¼˜ä½ç½®ï¼ˆPersonal Best, $pbest$ï¼‰å’Œç¾¤ä½“å†å²æœ€ä¼˜ä½ç½®ï¼ˆGlobal Best, $gbest$ï¼‰å…±åŒæŒ‡å¯¼å…¶ç§»åŠ¨æ–¹å‘ä¸é€Ÿåº¦è°ƒæ•´ã€‚å…·ä½“çš„æ›´æ–°å…¬å¼å¦‚ä¸‹ï¼š
\[
\begin{aligned}
v_i^{(t+1)} &= w \cdot v_i^{(t)} + c_1 \cdot r_1 \cdot (pbest_i - x_i^{(t)}) + c_2 \cdot r_2 \cdot (gbest - x_i^{(t)}), \\
x_i^{(t+1)} &= x_i^{(t)} + v_i^{(t+1)},
\end{aligned}
\]
å…¶ä¸­ï¼Œ$x_i^{(t)}$ ä¸ $v_i^{(t)}$ åˆ†åˆ«è¡¨ç¤ºç¬¬ $i$ ä¸ªç²’å­åœ¨ç¬¬ $t$ ä»£çš„ä½ç½®ä¿¡æ¯ä¸é€Ÿåº¦ï¼›$w$ ä¸ºæƒ¯æ€§æƒé‡ï¼Œæ§åˆ¶ç²’å­æœç´¢çš„ç¨³å®šæ€§ï¼›$c_1$ å’Œ $c_2$ åˆ†åˆ«ä¸ºä¸ªä½“å­¦ä¹ å› å­ä¸ç¾¤ä½“å­¦ä¹ å› å­ï¼›$r_1$ å’Œ $r_2$ ä¸ºæœä» $[0,1]$ åŒºé—´å‡åŒ€åˆ†å¸ƒçš„éšæœºæ•°ï¼Œç”¨äºå¢å¼ºç®—æ³•çš„éšæœºæ¢ç´¢èƒ½åŠ›ã€‚

PSO ç®—æ³•çš„ä¼˜ç‚¹åœ¨äºç»“æ„ç®€å•ã€å‚æ•°å°‘ã€å…¨å±€æœç´¢èƒ½åŠ›å¼ºï¼Œå°¤å…¶é€‚ç”¨äºå¤æ‚éå‡¸ã€ä¸å¯å¯¼ç”šè‡³ç¦»æ•£çš„ç»„åˆä¼˜åŒ–é—®é¢˜ã€‚ä½†å…¶ç¼ºç‚¹æ˜¯ç¼ºä¹ç²¾ç¡®æ€§ä¸æœ€ä¼˜æ€§ä¿è¯ï¼Œé€šå¸¸ä½œä¸ºå¯å‘å¼æ–¹æ³•ç”¨äºç”Ÿæˆå¯è¡Œè§£æˆ–å±€éƒ¨æœ€ä¼˜è§£ã€‚

\subsection{PSO ä¸ Gurobi è”åˆä¼˜åŒ–æ¡†æ¶}

åœ¨æœ¬ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬ç»“åˆç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•çš„å…¨å±€æœç´¢èƒ½åŠ›ä¸ Gurobi æ±‚è§£å™¨çš„ç²¾ç¡®ä¼˜åŒ–èƒ½åŠ›ï¼Œæ„å»ºäº†ä¸€ä¸ªä¸¤é˜¶æ®µä¼˜åŒ–æ¡†æ¶ï¼Œå¦‚å›¾~\ref{fig:framework} æ‰€ç¤ºã€‚

\begin{enumerate}
    \item \textbf{ç¬¬ä¸€é˜¶æ®µï¼šç²’å­ç¾¤ä¼˜åŒ–ï¼ˆPSOï¼‰ç”Ÿæˆå¯è¡Œè§£}ã€‚é€šè¿‡ PSO å¯¹è´·æ¬¾é€‰æ‹©å‘é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œåˆ©ç”¨å…¶é«˜æ•ˆçš„å…¨å±€æœç´¢èƒ½åŠ›åœ¨å¯è¡ŒåŸŸå†…æ¢ç´¢æœŸæœ›æ”¶ç›Šè¾ƒé«˜çš„å¯è¡Œè§£ï¼Œå½¢æˆå¤šä¸ªé«˜è´¨é‡çš„å€™é€‰è§£ã€‚
    
    \item \textbf{ç¬¬äºŒé˜¶æ®µï¼šGurobi ç²¾ç¡®ä¼˜åŒ–æ±‚è§£ï¼ˆMIPï¼‰}ã€‚å°† PSO æ‰€å¾—åˆ°çš„æœ€ä¼˜è§£ä½œä¸º warm-start åˆå§‹åŒ–è¾“å…¥è‡³ Gurobiï¼Œè¿›ä¸€æ­¥åœ¨ä¸¥æ ¼çš„æ•´æ•°è§„åˆ’æ¨¡å‹ä¸‹è¿›è¡Œç²¾ç»†æ±‚è§£ï¼Œä»¥è·å¾—æ»¡è¶³å…¨éƒ¨çº¦æŸæ¡ä»¶çš„æœ€ä¼˜è§£æˆ–è¿‘ä¼¼æœ€ä¼˜è§£ã€‚
\end{enumerate}

è¯¥æ¡†æ¶åœ¨å®é™…è¿è¡Œä¸­è¡¨ç°å‡ºè‰¯å¥½çš„æ•ˆç‡ä¸ç¨³å®šæ€§ï¼šPSO èƒ½åœ¨å¤§è§„æ¨¡ç»„åˆç©ºé—´ä¸­è¿…é€Ÿæ”¶æ•›è‡³é«˜è´¨é‡åŒºåŸŸï¼ŒGurobi åˆ™èƒ½å¤Ÿåœ¨æ­¤åŸºç¡€ä¸Šè¿›ä¸€æ­¥æå‡è§£çš„ç²¾åº¦ä¸ç¨³å®šæ€§ã€‚ä¸¤è€…çš„ååŒé…åˆå¼¥è¡¥äº†å¯å‘å¼ç®—æ³•å…¨å±€æ€§ä¸ç²¾ç¡®ç®—æ³•å±€éƒ¨æ€§ä¹‹é—´çš„å·®è·ï¼Œå®ç°äº†â€œç²—å®šä½+ç²¾ä¼˜åŒ–â€çš„ä¸€ä½“åŒ–æ±‚è§£ç­–ç•¥ã€‚

ä¸ºæå‡æ•´ä½“æ±‚è§£é€Ÿåº¦ï¼Œæˆ‘ä»¬è¿˜è®¾ç½®äº†ä»¥ä¸‹åŠ é€Ÿæœºåˆ¶ï¼š
\begin{itemize}
    \item åŸºäºè¯„åˆ†çš„ç²’å­ä½ç½®è§£ç æœºåˆ¶ï¼Œå°†ç²’å­å®æ•°ç¼–ç æ˜ å°„ä¸ºå¯è¡Œçš„ 0-1 å‘é‡ï¼›
    \item å¼•å…¥ç²¾è‹±ä¿ç•™ç­–ç•¥ï¼Œé¿å… Gurobi ä»è´¨é‡è¾ƒå·®çš„ PSO è§£å¼€å§‹ï¼›
    \item åœ¨ PSO é˜¶æ®µæå‰å‰”é™¤æ˜¾è‘—åŠ£è§£ï¼Œå‡å°‘æ— æ•ˆè¿­ä»£ä¸å†—ä½™è®¡ç®—ï¼›
    \item Gurobi æ±‚è§£ä¸­é‡‡ç”¨æ—¶é—´ä¸Šé™ã€MIPGap ç­‰å‚æ•°æ§åˆ¶å™¨ä»¥æé«˜æ±‚è§£æ•ˆç‡ã€‚
\end{itemize}

æ€»ä½“è€Œè¨€ï¼ŒPSO+Gurobi è”åˆæ¡†æ¶å……åˆ†ç»“åˆäº†ç¾¤ä½“æ™ºèƒ½ä¸æ•°å­¦è§„åˆ’çš„ä¼˜åŠ¿ï¼Œä¸ºè§£å†³å¤æ‚çº¦æŸä¸‹çš„è´·æ¬¾ç»„åˆä¼˜åŒ–é—®é¢˜æä¾›äº†é«˜æ•ˆã€ç¨³å¥çš„ç®—æ³•æ”¯æŒã€‚
\begin{figure}[htbp]
\centering
\begin{tikzpicture}[node distance=1.7cm, every node/.style={font=\small}]
  % æ ·å¼å®šä¹‰
  \tikzstyle{startstop} = [rectangle, rounded corners, minimum width=5cm, minimum height=0.8cm,text centered, draw=black, fill=blue!10]
  \tikzstyle{process} = [rectangle, minimum width=5cm, minimum height=0.8cm, text centered, draw=black, fill=gray!10]
  \tikzstyle{arrow} = [thick,->,>=stealth]

  % èŠ‚ç‚¹å®šä¹‰
  \node (start) [startstop] {ğŸš€ å¼€å§‹ï¼šåˆå§‹åŒ–å‚æ•°};
  \node (pso) [process, below of=start] {ğŸ¦ é˜¶æ®µä¸€ï¼šPSO ç²’å­ç¾¤æœç´¢};
  \node (decode) [process, below of=pso] {ğŸ§  è§£ç ç²’å­ä¸º0-1ç»„åˆ};
  \node (select) [process, below of=decode] {ğŸŒŸ é€‰å–æœ€ä¼˜ç²’å­è§£};
  \node (gurobi) [process, below of=select] {ğŸ§® é˜¶æ®µäºŒï¼šGurobi ç²¾ç¡®æ±‚è§£};
  \node (end) [startstop, below of=gurobi] {ğŸ“Š è¾“å‡ºæœ€ä¼˜æŠ•èµ„ç»„åˆ};

  % ç®­å¤´è¿æ¥
  \draw [arrow] (start) -- (pso);
  \draw [arrow] (pso) -- (decode);
  \draw [arrow] (decode) -- (select);
  \draw [arrow] (select) -- (gurobi);
  \draw [arrow] (gurobi) -- (end);
\end{tikzpicture}
\caption{PSO ä¸ Gurobi è”åˆä¼˜åŒ–æ¡†æ¶å›¾}
\label{fig:framework}
\end{figure}


\section{æ¡ˆä¾‹ç ”ç©¶}
\label{sec:case_study}
\subsection{æ•°æ®é›†æè¿°}

\label{subsec:dataset_description}

æœ¬ç ”ç©¶ä½¿ç”¨çš„æ•°æ®é›†æ¥è‡ª Lending Club å¹³å°, åŸå§‹æ•°æ®ç”± Kaggle ç½‘ç«™\url{https://www.kaggle.com/datasets/wordsforthewise/lending-club}å…¬å¼€æä¾›. Lending Club æ˜¯ç¾å›½æœ€å¤§çš„ç½‘ç»œå€Ÿè´·å¹³å°ä¹‹ä¸€, æä¾›äº†è¯¦å°½çš„ä¸ªäººå€Ÿæ¬¾ç”³è¯·åŠå…¶è¿˜æ¬¾æƒ…å†µçš„æ•°æ®, å¹¿æ³›åº”ç”¨äºå­¦æœ¯ç•Œå’Œå·¥ä¸šç•Œè¿›è¡Œä¿¡è´·é£é™©è¯„ä¼°, è¿çº¦é¢„æµ‹åŠæŠ•èµ„ç»„åˆä¼˜åŒ–ç­‰ç ”ç©¶. 

è¯¥æ•°æ®é›†åŒ…å«äº†ä» 2007 å¹´è‡³ 2018 å¹´çš„å€Ÿæ¬¾è®°å½•, å…±è®¡æ•°ç™¾ä¸‡æ¡æ ·æœ¬. æ¯æ¡è®°å½•å¯¹åº”ä¸€ç¬”è´·æ¬¾ç”³è¯·, æ¶µç›–äº†åŒ…æ‹¬è´·æ¬¾é‡‘é¢, åˆ©ç‡, å€Ÿæ¬¾äººä¿¡ç”¨ç­‰çº§, å€ºåŠ¡æ”¶å…¥æ¯”, è´·æ¬¾æœŸé™, è¿˜æ¬¾çŠ¶æ€, å°±ä¸šå¹´é™, æ”¶å…¥, åœ°å€çŠ¶æ€, æˆ¿å±‹æ‰€æœ‰æƒ, FICO è¯„åˆ†åŒºé—´ç­‰åœ¨å†…çš„å¤šç»´åº¦ä¿¡æ¯. 

åœ¨æœ¬ç ”ç©¶ä¸­, æˆ‘ä»¬ä¸»è¦ç­›é€‰å¹¶ä¿ç•™ä»¥ä¸‹å˜é‡ç”¨äºå»ºæ¨¡åˆ†æï¼š

\begin{itemize}
  \item{loan\_amnt}: å€Ÿæ¬¾äººç”³è¯·çš„è´·æ¬¾é‡‘é¢, ä½œä¸º $A_i$ï¼›
  \item{int\_rate}: å€Ÿæ¬¾åˆåŒä¸­çº¦å®šçš„å¹´åˆ©ç‡, ç”¨äºè®¡ç®—æ”¶ç›Šç‡ $r_i$ï¼›
  \item{grade}: å€Ÿæ¬¾äººçš„ä¿¡ç”¨ç­‰çº§ï¼ˆA è‡³ Gï¼‰, ç”¨äºåˆ†ç»„é™åˆ¶ï¼›
  \item{loan\_status}: å®é™…è´·æ¬¾çš„è¿˜æ¬¾çŠ¶æ€ï¼ˆå¦‚ Fully Paid, Charged Offï¼‰, ç”¨äºæ¨æ–­è¿çº¦æƒ…å†µï¼›
  \item{annual\_inc}: å€Ÿæ¬¾äººå¹´æ”¶å…¥ï¼›
  \item{dti}: å€ºåŠ¡æ”¶å…¥æ¯”, ç”¨äºè¾…åŠ©é£é™©åˆ»ç”»ï¼›
  \item{term}: è´·æ¬¾æœŸé™ï¼ˆå¦‚ 36 months æˆ– 60 monthsï¼‰ï¼›
  \item{emp\_length}: å€Ÿæ¬¾äººå·¥ä½œå¹´é™ï¼›
  \item{addr\_state}: å€Ÿæ¬¾äººæ‰€åœ¨å·ï¼›
  \item{fico\_range\_high, fico\_range\_low}: å€Ÿæ¬¾äºº FICO ä¿¡ç”¨è¯„åˆ†åŒºé—´ï¼›
\end{itemize}

ä¸ºäº†æ»¡è¶³æ¨¡å‹ä¸­å¯¹è¿çº¦æ¦‚ç‡ $P_i$ çš„éœ€æ±‚, æˆ‘ä»¬å°† ``loan\_status'' å­—æ®µä¸­çŠ¶æ€ä¸º ``Charged Off'' çš„è´·æ¬¾è§†ä¸ºè¿çº¦æ ·æœ¬, å…¶ä½™å¦‚ ``Fully Paid'', ``Current'' ç­‰çŠ¶æ€ä½œä¸ºéè¿çº¦æ ·æœ¬, å¹¶åŸºäºå†å²é¢‘ç‡æ³•ä¼°ç®—æ¯ä¸€ç±»è´·æ¬¾çš„è¿çº¦æ¦‚ç‡. 

æ­¤å¤–, ä¸ºæ¨¡æ‹Ÿè´·æ¬¾è¿çº¦çš„é£é™©åœºæ™¯, æˆ‘ä»¬ä»¥å€Ÿæ¬¾äººçš„ä¿¡ç”¨ç­‰çº§, FICOè¯„åˆ†å’Œå†å²è¿çº¦é¢‘ç‡ä¸ºä¾æ®, æ„å»ºäº† $S$ ä¸ª Monte Carlo é£é™©åœºæ™¯, ç”¨äºåç»­ CVaR ä¼˜åŒ–æ¨¡å‹çš„é£é™©è¯„ä¼°. 

é€šè¿‡ä¸Šè¿°æ•°æ®å¤„ç†æ­¥éª¤, æœ€ç»ˆå½¢æˆäº†ä¸€ä¸ªç»“æ„è§„èŒƒ, ä¿¡æ¯å®Œå¤‡, é€‚ç”¨äºç»„åˆä¼˜åŒ–é—®é¢˜çš„æ•°æ®é›†, ä¸ºåç»­å®è¯åˆ†æä¸å»ºæ¨¡æä¾›äº†åšå®çš„æ•°æ®åŸºç¡€. 

\begin{table}[htbp]
\centering
\caption{ä¸‰ç±»æŠ•èµ„ä¼˜åŒ–æ¨¡å‹çš„ä¸»è¦å‚æ•°è®¾ç½®}
\begin{tabular}{lll}
\toprule
\textbf{å‚æ•°ç¬¦å·} &{å«ä¹‰} &{é€‚ç”¨æ¨¡å‹} \\
\midrule
$B$ & æŠ•èµ„æ€»é¢„ç®—ï¼Œ$1 \times 10^8$ å…ƒ & å…¨éƒ¨ \\
$m$ & æœ€å¤šé€‰æ‹©çš„è´·æ¬¾æ•°é‡ï¼ˆTop-$m$ï¼‰ï¼Œ5000 & å…¨éƒ¨ \\
$P_i$ & è´·æ¬¾ $i$ çš„è¿çº¦æ¦‚ç‡ï¼Œ$P_i \in [0, 1]$ & å…¨éƒ¨ \\
$R_{\max}$ & é£é™©å®¹å¿å€¼ä¸Šé™ï¼Œ$1.5 \times 10^7$ å…ƒ & åŸå§‹æ¨¡å‹ \\
$\text{CVaR}_{\max}$ & æœŸæœ›é£é™©å®¹å¿å€¼ä¸Šé™ï¼Œ$1.5 \times 10^7$ å…ƒ & CVaR\\
$\beta$ & ç½®ä¿¡æ°´å¹³ï¼ˆVaRã€CVaRï¼‰ï¼Œ0.95 & VaR ï¼ŒCVaR\\
$\eta$ & VaRä¸´ç•Œå€¼ï¼ˆä¸Šç•Œï¼‰ï¼ŒåŠ¨æ€å˜é‡ & VaR ï¼ŒCVaR\\
$S$ & è’™ç‰¹å¡æ´›æ¨¡æ‹Ÿåœºæ™¯æ•°é‡ï¼Œ1000 & VaR ï¼ŒCVaR\\
$\alpha_k$ & ä¿¡ç”¨ç­‰çº§æ¯”ä¾‹ä¸Šé™ & åŸå§‹æ¨¡å‹\\
& \quad A: 40\%, B: 30\%, C: 20\%, D: 10\%, E: 5\%, F: 2\%, G: 1\% & \\
$pop\_size$ & ç²’å­ç¾¤ç®—æ³•ç§ç¾¤è§„æ¨¡ï¼Œ30 & å¯å‘å¼è¾…åŠ©ï¼ˆVaR / CVaRï¼‰ \\
$max\_iter$ & ç²’å­ç¾¤æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œ100 & å¯å‘å¼è¾…åŠ©ï¼ˆVaR / CVaRï¼‰ \\
$(w, c_1, c_2)$ & PSO å‚æ•°è®¾ç½®ï¼š$w=0.7$, $c_1=c_2=1.5$ & å¯å‘å¼è¾…åŠ©ï¼ˆVaR / CVaRï¼‰ \\
\bottomrule
\end{tabular}
\label{tab:three-model-params}
\end{table}
\subsection{ä½¿ç”¨æœºå™¨å­¦ä¹ é¢„æµ‹è¿çº¦æ¦‚ç‡ $P_i$}
\label{subsec:predict_p_i}

å°½ç®¡æœ¬ç ”ç©¶ä½¿ç”¨çš„æ•°æ®é›†ä¸­æ‰€æœ‰è´·æ¬¾å‡å·²è·å¾—å®é™…èµ„åŠ©, ä½†åœ¨èµ„é‡‘æœ‰é™, éœ€è¿›è¡Œä¼˜é€‰é…ç½®çš„æƒ…å¢ƒä¸‹, æˆ‘ä»¬ä»éœ€è¦å¯¹è¿™äº›å·²å‘æ”¾è´·æ¬¾çš„è¿˜æ¬¾é£é™©è¿›è¡Œå†è¯„ä¼°. ä¸ºæ­¤, æˆ‘ä»¬å¼•å…¥æœºå™¨å­¦ä¹ æ–¹æ³•, å¯¹æ¯ç¬”è´·æ¬¾çš„æœªæ¥è¿çº¦æ¦‚ç‡ $P_i$ è¿›è¡Œé¢„æµ‹å»ºæ¨¡, ä»¥ä½œä¸ºåç»­ä¼˜åŒ–æ¨¡å‹ä¸­çš„é£é™©è¾“å…¥å‚æ•°. 

\paragraph{å»ºæ¨¡ç›®æ ‡} 
é¢„æµ‹å‡½æ•°çš„ç›®æ ‡æ˜¯ï¼šå¯¹äºæ¯ç¬”å·²å‘æ”¾è´·æ¬¾ $i$, æ ¹æ®å…¶å·²çŸ¥ç‰¹å¾å‘é‡ $\mathbf{x}_i$, ä¼°è®¡å…¶åœ¨æœªæ¥å‘ç”Ÿè¿çº¦çš„æ¦‚ç‡ $P_i = \mathbb{P}(y_i = 1 \mid \mathbf{x}_i)$. å…¶ä¸­, $y_i=1$ è¡¨ç¤ºè´·æ¬¾æœ€ç»ˆå‘ç”Ÿè¿çº¦ï¼ˆå¦‚çŠ¶æ€ä¸º \texttt{Charged Off}ï¼‰, $y_i=0$ è¡¨ç¤ºè´·æ¬¾æœ€ç»ˆè¿˜æ¸…ï¼ˆå¦‚çŠ¶æ€ä¸º \texttt{Fully Paid}ï¼‰. 

\paragraph{ç‰¹å¾æ„é€ }
æˆ‘ä»¬åŸºäºå€Ÿæ¬¾äººåŸºæœ¬å±æ€§, è´·æ¬¾åˆåŒä¿¡æ¯ä»¥åŠä¿¡ç”¨è¯„çº§ç­‰ä¿¡æ¯æ„å»ºé¢„æµ‹ç‰¹å¾é›†, æ¶µç›–ä½†ä¸é™äºä»¥ä¸‹å˜é‡ï¼š

\begin{itemize}
  \item{loan\_amnt}ï¼šè´·æ¬¾é‡‘é¢ï¼›
  \item{term}ï¼šè´·æ¬¾æœŸé™ï¼›
  \item{int\_rate}ï¼šè´·æ¬¾åˆ©ç‡ï¼›
  \item{grade} å’Œ{sub\_grade}ï¼šLending Club ä¿¡ç”¨è¯„çº§ï¼›
  \item{emp\_length}ï¼šå·¥ä½œå¹´é™ï¼›
  \item{home\_ownership}ï¼šä½æˆ¿ç±»å‹ï¼›
  \item{annual\_inc}ï¼šå¹´æ”¶å…¥ï¼›
  \item{dti}ï¼šå€ºåŠ¡æ”¶å…¥æ¯”ï¼›
  \item{purpose}ï¼šè´·æ¬¾ç”¨é€”ï¼›
  \item{fico\_range\_high / low}ï¼šä¿¡ç”¨è¯„åˆ†ï¼›
\end{itemize}

\paragraph{å»ºæ¨¡æ–¹æ³•}
è€ƒè™‘åˆ°ç›®æ ‡å˜é‡ä»æ˜¯äºŒå…ƒçŠ¶æ€ï¼ˆè¿çº¦ / æœªè¿çº¦ï¼‰, æˆ‘ä»¬é‡‡ç”¨ç›‘ç£å­¦ä¹ çš„äºŒåˆ†ç±»æ–¹æ³•è¿›è¡Œå»ºæ¨¡. å°è¯•çš„æ¨¡å‹åŒ…æ‹¬é€»è¾‘å›å½’ï¼ˆLogistic Regressionï¼‰, éšæœºæ£®æ—ï¼ˆRandom Forestï¼‰, æ¢¯åº¦æå‡æ ‘ï¼ˆGBDTï¼‰, æç«¯æ¢¯åº¦æå‡ï¼ˆXGBoostï¼‰ç­‰. 

ç”±äºæ ·æœ¬ä¸­è¿çº¦æ ·æœ¬å æ¯”ç›¸å¯¹è¾ƒå°, æˆ‘ä»¬åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­é‡‡ç”¨ç±»åˆ«åŠ æƒ, æ¬ é‡‡æ ·ç­‰æ–¹å¼å¤„ç†ç±»åˆ«ä¸å¹³è¡¡é—®é¢˜. 

\paragraph{è®­ç»ƒä¸è¯„ä¼°}

æˆ‘ä»¬å°†å…¨éƒ¨å·²å‘æ”¾è´·æ¬¾éšæœºåˆ’åˆ†ä¸ºè®­ç»ƒé›†ï¼ˆ70\%ï¼‰ä¸æµ‹è¯•é›†ï¼ˆ30\%ï¼‰, ä½¿ç”¨äº¤å‰éªŒè¯è°ƒä¼˜å‚æ•°, å¹¶åŸºäºæµ‹è¯•é›†è¯„ä¼°æ¨¡å‹è¡¨ç°. è¯„ä»·æŒ‡æ ‡åŒ…æ‹¬å‡†ç¡®ç‡ï¼ˆAccuracyï¼‰, AUC å€¼ï¼ˆArea Under the ROC Curveï¼‰, F1 åˆ†æ•°ç­‰. 

æœ€ç»ˆ, æˆ‘ä»¬é€‰æ‹© AUC è¡¨ç°æœ€ä¼˜çš„æ¨¡å‹ç”¨äºå¯¹æ‰€æœ‰è´·æ¬¾æ ·æœ¬ç”Ÿæˆè¿çº¦æ¦‚ç‡é¢„æµ‹å€¼ $\hat{P}_i$, ä½œä¸ºåç»­ä¼˜åŒ–æ¨¡å‹ä¸­çš„è¾“å…¥. 

\paragraph{è¯´æ˜}
è™½ç„¶åŸå§‹æ•°æ®ä¸­æ¯ç¬”è´·æ¬¾éƒ½å·²å®é™…æ”¾æ¬¾, ä½†æˆ‘ä»¬çš„å»ºæ¨¡ä»»åŠ¡æ˜¯ä¸ºç°å®ä¸­çš„â€œå†é€‰æ‹©â€æä¾›ä¾æ®. å³åœ¨é¢„ç®—å—é™, èµ„æºä¸è¶³æ—¶, å¦‚ä½•åœ¨è¿™äº›çœŸå®å·²æ”¾æ¬¾çš„è´·æ¬¾ä¸­ä¼˜å…ˆæŒ‘é€‰è¿çº¦æ¦‚ç‡ä½, é¢„æœŸæ”¶ç›Šé«˜çš„å­é›†, æ„å»ºä¸€ä¸ªæ›´ç¨³å¥çš„æŠ•èµ„ç»„åˆ. å› æ­¤, $\hat{P}_i$ çš„é¢„æµ‹å¹¶éç”¨äºå†³å®šæ”¾æ¬¾ä¸å¦, è€Œæ˜¯ä½œä¸ºç»„åˆä¼˜åŒ–çš„â€œé£é™©ä¼°è®¡é‡â€, ç”¨äºæ„å»ºæœŸæœ›æ”¶ç›Šä¸ CVaR ç­‰é£é™©æŒ‡æ ‡. 
\subsection{ä¸‰ç±»ä¼˜åŒ–æ¨¡å‹çš„æ„å»ºä¸æ±‚è§£}
\label{subsec:model_solving}

æœ¬èŠ‚åˆ†åˆ«æ„å»ºå¹¶æ±‚è§£ä¸‰ç±»è´·æ¬¾ç­›é€‰ä¼˜åŒ–æ¨¡å‹ï¼šåŸå§‹æ¨¡å‹ã€VaRï¼ˆValue at Riskï¼‰æ¨¡å‹å’Œ CVaRï¼ˆConditional Value at Riskï¼‰æ¨¡å‹ã€‚ä¸‰ç§æ¨¡å‹å‡ä»¥æœ€å¤§åŒ–æŠ•èµ„æ”¶ç›Šä¸ºç›®æ ‡ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šé€æ­¥å¼•å…¥é£é™©æ§åˆ¶æœºåˆ¶ï¼Œä»¥åˆ»ç”»å®é™…æŠ•èµ„åœºæ™¯ä¸­å¯¹é£é™©çš„å¤šå±‚æ¬¡ç®¡æ§éœ€æ±‚ã€‚

\vspace{1em}
\paragraph{åŸå§‹æ¨¡å‹ï¼ˆæœŸæœ›æŸå¤±çº¦æŸï¼‰}

\begin{algorithm}[htbp]
\caption{æœ€å¤§åŒ–æœŸæœ›å›æ¬¾çš„æŠ•èµ„ç»„åˆä¼˜åŒ–}
\label{alg:max_profit}
\SetAlgoNlRelativeSize{0}
\KwIn{è´·æ¬¾æ•°æ®é›†ï¼šæ¯æ¡æ•°æ®åŒ…å« $A_i$ï¼ˆé‡‘é¢ï¼‰ã€$r_i$ï¼ˆåˆ©ç‡ï¼‰ã€$P_i$ï¼ˆè¿˜æ¬¾æ¦‚ç‡ï¼‰ã€ä¿¡ç”¨ç­‰çº§}
\KwOut{æœ€ä¼˜è´·æ¬¾å­é›† $x_i \in \{0,1\}$ åŠå…¶ç»„åˆç»Ÿè®¡}

\BlankLine
\textbf{æ•°æ®é¢„å¤„ç†ï¼š} è®¡ç®— $A_i = \texttt{loan\_amnt}_i$, $r_i = \texttt{int\_rate}_i / 100$, $P_i = \texttt{default\_prob}_i$\;
æ¸…æ´—ç¼ºå¤±å€¼ä¸æ— æ•ˆå€¼ï¼›æŒ‰ç­‰çº§åˆ†ç»„ä¸º $G_k$\;

\BlankLine
\textbf{æ¨¡å‹æ„å»ºï¼š}\;
å®šä¹‰å†³ç­–å˜é‡ $x_i \in \{0,1\}$ï¼Œè¡¨ç¤ºæ˜¯å¦é€‰æ‹©è´·æ¬¾ $i$\;
è®¾å®šç›®æ ‡å‡½æ•°ï¼šæœ€å¤§åŒ– $\sum x_i A_i r_i(1 - P_i) $\;
æ·»åŠ çº¦æŸï¼š
\begin{itemize}
  \item $\sum x_i A_i \le B$ \hfill \tcp*[f]{é¢„ç®—çº¦æŸ}
  \item $\sum_{i \in G_k} x_i A_i \le \alpha_k B$ \hfill \tcp*[f]{ä¿¡ç”¨ç­‰çº§æ¯”ä¾‹çº¦æŸ}
  \item $\sum x_i A_i P_i \le R_{\max}$ \hfill \tcp*[f]{é£é™©çº¦æŸ}
  \item $\sum x_i \le m$ \hfill \tcp*[f]{Top-$m$ é™åˆ¶}
\end{itemize}

\BlankLine
è°ƒç”¨ Gurobi ä¼˜åŒ–å™¨æ±‚è§£æ¨¡å‹\;
\If{æ¨¡å‹å¯è§£}{
    è¾“å‡ºæœ€ä¼˜è´·æ¬¾ç»„åˆ $x_i = 1$ çš„å­é›†\;
    ç»Ÿè®¡å¹¶ä¿å­˜ç»“æœè‡³ CSV æ–‡ä»¶\;
}
\Else{
    è¾“å‡ºæ¨¡å‹æ±‚è§£å¤±è´¥ä¸é”™è¯¯ç±»å‹ï¼ˆä¸å¯è¡Œ/æ— ç•Œï¼‰\;
}
\end{algorithm}

ä¸ºæ±‚è§£æœ€å¤§åŒ–æœŸæœ›å›æ¬¾çš„æŠ•èµ„ç»„åˆé—®é¢˜ï¼Œæœ¬æ–‡æ„å»ºäº†å¦‚ç®—æ³•~\ref{alg:max_profit} æ‰€ç¤ºçš„æ··åˆæ•´æ•°è§„åˆ’æ¨¡å‹ã€‚åœ¨åŸå§‹è´·æ¬¾æ•°æ®ä¸­ï¼Œæ¯æ¡è®°å½•åŒ…å«é‡‘é¢ $A_i$ã€å¹´åˆ©ç‡ $r_i$ã€è¿˜æ¬¾æ¦‚ç‡ $P_i$ åŠå…¶ä¿¡ç”¨ç­‰çº§ã€‚æ¨¡å‹ç›®æ ‡æ˜¯åœ¨é¢„ç®—é™åˆ¶ã€é£é™©æ§åˆ¶å’Œä¿¡ç”¨ç»“æ„çº¦æŸä¸‹ï¼Œç­›é€‰å‡ºæ”¶ç›Šæœ€ä¼˜çš„è´·æ¬¾å­é›†ã€‚

æ¨¡å‹ä¸»è¦ç‰¹å¾å¦‚ä¸‹ï¼š
ç›®æ ‡å‡½æ•°æœ€å¤§åŒ–ç»„åˆçš„æœŸæœ›å‡€æ”¶ç›Š $\sum x_i A_i r_i (1 - P_i)$ï¼›
çº¦æŸæ¡ä»¶æ¶µç›–æ€»é¢„ç®—é™åˆ¶ã€ä¿¡ç”¨ç­‰çº§æ¯”ä¾‹æ§åˆ¶ã€æœŸæœ›æŸå¤±ä¸Šé™åŠæŠ•èµ„ç¬”æ•°ä¸Šé™ï¼›
å†³ç­–å˜é‡ $x_i \in \{0,1\}$ è¡¨ç¤ºæ˜¯å¦é€‰ä¸­è´·æ¬¾ $i$ã€‚

æ±‚è§£ç»“æœæ˜¾ç¤ºï¼šGurobi ä¼˜åŒ–å™¨å¯åœ¨çº¦ 1.3 ç§’å†…æ”¶æ•›è‡³æœ€ä¼˜è§£ã€‚æœ€ç»ˆé€‰ä¸­ 3293 ç¬”è´·æ¬¾ï¼Œæ€»æŠ•èµ„é‡‘é¢ä¸º \$58,676,750ï¼Œæœªè§¦åŠé¢„ç®—ä¸Šé™ï¼Œè¡¨æ˜æ¨¡å‹å…·å¤‡è¾ƒå¼ºçš„é£é™©æ§åˆ¶èƒ½åŠ›ä¸è°ƒèŠ‚å†—ä½™ã€‚ç»„åˆçš„æœŸæœ›å‡€æ”¶ç›Šä¸º \$3,538,325.75ã€‚

æŒ‰ä¿¡ç”¨ç­‰çº§åˆ†ç±»å¦‚ä¸‹ï¼š

\begin{table}[htbp]
\centering
\caption{æœ€ä¼˜ç»„åˆä¸­å„ç­‰çº§è´·æ¬¾ç»Ÿè®¡}
\begin{tabular}{lccc}
\toprule
ä¿¡ç”¨ç­‰çº§ & è´·æ¬¾æ•°é‡ï¼ˆç¬”ï¼‰ & é‡‘é¢åˆè®¡ï¼ˆç¾å…ƒï¼‰ & å¹³å‡è¿çº¦æ¦‚ç‡ \\
\midrule
A & 2180 & 40,000,000 & 12.65\% \\
B & 1113 & 18,676,750 & 26.52\% \\
\bottomrule
\end{tabular}
\end{table}

ç»“æœæ˜¾ç¤ºï¼Œé«˜è¯„çº§ï¼ˆAç±»ï¼‰è´·æ¬¾åœ¨æŠ•èµ„ç»„åˆä¸­å æ®ä¸»å¯¼åœ°ä½ï¼Œè¡¨æ˜æ¨¡å‹æ›´åå¥½ä½é£é™©ã€é«˜ç¨³å®šæ€§çš„æŠ•èµ„å¯¹è±¡ï¼›Bç±»è´·æ¬¾ä½œä¸ºæ”¶ç›Šè¡¥å……ã€‚åœ¨ä¸¥æ ¼çš„é£é™©æ§åˆ¶å’Œç»“æ„çº¦æŸä¸‹ï¼Œè¯¥æ¨¡å‹å®ç°äº†æ”¶ç›Šä¸ç¨³å¥æ€§çš„å¹³è¡¡ï¼Œå…·å¤‡ç°å®æŠ•èµ„æŒ‡å¯¼ä»·å€¼ã€‚

\vspace{1em}
\paragraph{VaR æ¨¡å‹ï¼ˆæç«¯æŸå¤±æ¦‚ç‡æ§åˆ¶ï¼‰}

\begin{algorithm}[htbp]
\caption{åŸºäºVaRçº¦æŸçš„è´·æ¬¾ç»„åˆä¼˜åŒ–ï¼ˆPSO + Gurobiï¼‰}
\KwIn{è´·æ¬¾æ•°æ® $(A_i, r_i, P_i)$ï¼Œé¢„ç®— $B$ï¼Œä¸ªæ•°ä¸Šé™ $m$ï¼ŒVaRç½®ä¿¡æ°´å¹³ $\beta$}
\KwOut{æœ€å¤§æœŸæœ›æ”¶ç›Šçš„è´·æ¬¾å­é›† $x_i \in \{0,1\}$}

\textbf{1. æ•°æ®å¤„ç†ä¸åœºæ™¯ç”Ÿæˆï¼š} \\
è®¡ç®— $profit_i = A_i \cdot r_i \cdot (1 - P_i)$ï¼›\\
ç”Ÿæˆ $S$ ä¸ªåœºæ™¯æŸå¤± $L_{i,s} \sim \text{Bernoulli}(P_i) \cdot A_i$ï¼›

\textbf{2. ç²’å­ç¾¤åˆå§‹åŒ–ï¼š} \\
å¯å‘å¼ç”Ÿæˆåˆå§‹ç²’å­ï¼Œè®¾ç½®é€Ÿåº¦ä¸å‚æ•°ï¼›

\textbf{3. PSO è¿­ä»£ï¼š} \\
\For{$t = 1$ \KwTo $T$}{
  è®¡ç®—æ¯ä¸ªç²’å­çš„ VaR å€¼ $\eta$ï¼›\\
  è‹¥ $\eta$ è¶…è¿‡ä¸Šé™æˆ–çº¦æŸä¸æ»¡è¶³ï¼Œåˆ™é€‚åº”åº¦ä¸º $-\infty$ï¼›\\
  å¦åˆ™è®¡ç®—æœŸæœ›æ”¶ç›Šä½œä¸ºé€‚åº”åº¦ï¼›\\
  æ›´æ–°ä¸ªä½“/å…¨å±€æœ€ä¼˜ï¼Œè°ƒæ•´é€Ÿåº¦ä¸ä½ç½®ï¼›
}

\textbf{4. Gurobi ç²¾è§£ï¼ˆWarm-startï¼‰ï¼š} \\
æ„å»ºæ¨¡å‹ï¼Œæœ€å¤§åŒ– $\sum x_i profit_i$ï¼Œçº¦æŸåŒ…æ‹¬ï¼š\\
é¢„ç®— $\sum x_i A_i \le B$ï¼›ä¸ªæ•° $\sum x_i \le m$ï¼›\\
VaRç½®ä¿¡é™åˆ¶ $\sum_s z_s \le (1 - \beta) S$ï¼›\\
æŸå¤± $> \eta$ çš„åœºæ™¯ç”±å˜é‡ $z_s$ è¡¨ç¤ºï¼›\\
ä½¿ç”¨ PSO è§£ warm-startï¼Œè¿›è¡Œç²¾ç¡®æ±‚è§£ï¼›
\end{algorithm}

\begin{table}[htbp]
\centering
\caption{åŸºäºVaRçº¦æŸçš„ä¼˜åŒ–ç»“æœæ¯”è¾ƒ}
\begin{tabular}{lccc}
\toprule
æ–¹æ³• & é€‰ä¸­è´·æ¬¾æ•° & æŠ•èµ„ç»„åˆæœŸæœ›æ”¶ç›Šï¼ˆå…ƒï¼‰ & VaR ä¸Šç•Œ $\eta$ï¼ˆå…ƒï¼‰ \\
\midrule
PSO ç²’å­ç¾¤ç®—æ³• & 5000 & 7,016,573.73 & 36,698,075.00 \\
Gurobi ç²¾ç¡®æ±‚è§£ & 5000 & 8,389,092.16 & 47,556,800.00 \\
\bottomrule
\end{tabular}
\label{tab:var-results}
\end{table}

VaR æ¨¡å‹é€šè¿‡é™åˆ¶æç«¯æŸå¤±å‡ºç°çš„æ¦‚ç‡ï¼Œæå‡æŠ•èµ„ç»„åˆåœ¨æç«¯æƒ…å½¢ä¸‹çš„ç¨³å¥æ€§ã€‚ç»“åˆç²’å­ç¾¤ç®—æ³•ï¼ˆPSOï¼‰ä¸æ··åˆæ•´æ•°è§„åˆ’ï¼ˆGurobiï¼‰å®ç°ä¸¤é˜¶æ®µæ±‚è§£ã€‚å®éªŒè¡¨æ˜ï¼ŒPSO èƒ½åœ¨çŸ­æ—¶é—´å†…è·å¾—å¯è¡Œè§£ï¼Œä½œä¸º warm-start åç»­æå‡æ±‚è§£è´¨é‡ã€‚æœ€ç»ˆç»„åˆæœŸæœ›æ”¶ç›Šä» 701.66 ä¸‡å…ƒæå‡è‡³ 838.91 ä¸‡å…ƒï¼ŒVaRå€¼äº¦ç•¥æœ‰ä¸Šå‡ï¼Œä½†ä»åœ¨95\%ç½®ä¿¡åŒºé—´å®¹è®¸èŒƒå›´å†…ï¼ŒéªŒè¯äº†æ¨¡å‹çš„æœ‰æ•ˆæ€§ä¸çµæ´»æ€§ã€‚

\vspace{1em}
\paragraph{CVaR æ¨¡å‹ï¼ˆå°¾éƒ¨é£é™©æ§åˆ¶ï¼‰}

\begin{algorithm}[htbp]
\caption{åŸºäºCVaRçº¦æŸçš„è´·æ¬¾ç»„åˆä¼˜åŒ–ï¼ˆPSO + Gurobiï¼‰}
\KwIn{è´·æ¬¾æ•°æ® $(A_i, r_i, P_i)$ï¼Œé¢„ç®— $B$ï¼Œä¸ªæ•°ä¸Šé™ $m$ï¼Œç½®ä¿¡æ°´å¹³ $\beta$ï¼ŒCVaRä¸Šé™ $R_{\max}$}
\KwOut{æœ€å¤§æœŸæœ›æ”¶ç›Šçš„è´·æ¬¾å­é›† $x_i \in \{0,1\}$}

\textbf{1. æ•°æ®å¤„ç†ä¸åœºæ™¯ç”Ÿæˆï¼š} \\
è®¡ç®— $profit_i = A_i \cdot r_i \cdot (1 - P_i)$ï¼›\\
ç”Ÿæˆ $S$ ä¸ªæŸå¤±åœºæ™¯ $L_{i,s}$ï¼›

\textbf{2. ç²’å­ç¾¤åˆå§‹åŒ–ä¸é€‚åº”åº¦ï¼š} \\
åˆå§‹åŒ–ç²’å­ $x$ï¼›\\
é€‚åº”åº¦ä¸º $\sum x_i profit_i$ åŠ é£é™©åˆ©ç”¨ç‡å¥–åŠ±ï¼›\\
å…¶ä¸­ $\text{CVaR} = \eta + \frac{1}{S(1-\beta)} \sum_s \max(l_s - \eta, 0)$ï¼›

\textbf{3. PSOä¼˜åŒ–è¿­ä»£ï¼š} \\
æ›´æ–°ç²’å­ä½ç½®ä¸é€Ÿåº¦ï¼Œä¿å­˜æœ€ä¼˜ç»„åˆï¼›

\textbf{4. Gurobi ç²¾è§£ï¼š} \\
æ„å»ºæ¨¡å‹ï¼Œæœ€å¤§åŒ– $\sum x_i profit_i + \lambda \cdot \eta / R_{\max}$ï¼›\\
çº¦æŸåŒ…æ‹¬é¢„ç®—ã€é¡¹ç›®ä¸ªæ•°ã€CVaRæ„é€ ä¸é£é™©ä¸Šé™ï¼›\\
ä½¿ç”¨ PSO è§£ warm-startï¼Œç²¾ç¡®æ±‚è§£ï¼›
\end{algorithm}

\begin{table}[htbp]
\centering
\caption{PSO ä¸ Gurobi ä¼˜åŒ–ç»“æœæ¯”è¾ƒï¼ˆCVaRçº¦æŸï¼‰}
\begin{tabular}{lcc}
\toprule
\textbf{æŒ‡æ ‡} &{PSO è§£} &{Gurobi è§£} \\
\midrule
æœŸæœ›å›æ¬¾ï¼ˆå…ƒï¼‰ & Â¥7,016,573.73 & Â¥5,753,233.48 \\
CVaR é£é™©å€¼ï¼ˆå…ƒï¼‰ & Â¥39,172,172.50 & Â¥14,997,698.50 \\
æ˜¯å¦æ»¡è¶³ CVaR çº¦æŸ & å¦ & æ˜¯ \\
é€‰ä¸­é¡¹ç›®æ•°é‡ & è‹¥å¹²ï¼ˆ$\leq 5000$ï¼‰ & è‹¥å¹²ï¼ˆ$\leq 5000$ï¼‰ \\
\bottomrule
\end{tabular}
\label{tab:results}
\end{table}

CVaR æ¨¡å‹é€šè¿‡çº¦æŸå°¾éƒ¨é£é™©æœŸæœ›ï¼ˆè€Œéå•ä¸€åˆ†ä½å€¼ï¼‰ï¼Œåœ¨æå‡ç¨³å¥æ€§çš„åŒæ—¶é¿å…è¿‡åº¦ä¿å®ˆã€‚å®éªŒç»“æœè¡¨æ˜ï¼šPSO æ–¹æ³•å¯å¿«é€Ÿç”Ÿæˆæ”¶ç›Šè¾ƒé«˜çš„è§£ï¼Œä½†å¯èƒ½ä¸æ»¡è¶³CVaRçº¦æŸï¼›Gurobi åˆ™èƒ½ç²¾ç¡®æ»¡è¶³é£é™©é™åˆ¶ï¼Œå°½ç®¡æ”¶ç›Šç•¥æœ‰ä¸‹é™ã€‚ä¸¤è€…ç»“åˆï¼Œå¯å®ç°æ•ˆç‡ä¸ç¨³å¥æ€§çš„åŒé‡ä¿éšœï¼Œä¸ºå®é™…æŠ•èµ„ç­–ç•¥æä¾›æœ‰åŠ›æ”¯æŒã€‚
\subsection{ç»“æœåˆ†æ}
\label{subsec:result_analysis}

\section{ç»“è®º}
\section*{å°ç»„åˆ†å·¥}
\begin{table}[htbp]
\centering
\begin{tabular}{ccc}
\hline
\textbf{å§“å} &{å­¦å·} &{åˆ†å·¥} \\ \hline
ææ™¶æ™¶ & 202428016443014 & è®ºæ–‡æ’°å†™, æ¨¡å‹è®¾è®¡ \\
å¼ ç’ & 202428016446002 & æ•°æ®å¤„ç†, æ¨¡å‹æ±‚è§£ \\ 
æœ±å†¯å©§ & 202428016443008 & è®ºæ–‡æ’°å†™, ç®—æ³•è®¾è®¡ \\ \hline
\end{tabular}
\end{table}
\newpage
\bibliographystyle{unsrtnat} 
\bibliography{ref}
%å°ç»„åˆ†å·¥


\section{é™„å½•}

\subsection{VaRæ¨¡å‹æ±‚è§£ç»“æœ}
\begin{lstlisting}[language=python]
  PS E:\github\homeworkofcalculatefinance> python -u "e:\github\homeworkofcalculatefinance\5-25-æ¨¡å‹æ±‚è§£\pso_gurobi_VaR.py"
âš™ï¸ æ­£åœ¨è¿è¡Œ PSO å¯»ä¼˜...

--- ç²’å­ç¾¤ä¼˜åŒ–ï¼ˆPSOï¼‰ç»“æœ ---
âœ… é€‰ä¸­å€Ÿæ¬¾äººæ•° = 5000
âœ… PSO æŠ•èµ„ç»„åˆæœŸæœ›æ”¶ç›Š = 7016573.73
âœ… PSO ä½¿ç”¨çš„ VaR ä¸Šç•Œ Î· = 36698075.00
Gurobi Optimizer version 11.0.3 build v11.0.3rc0 (win64 - Windows 11+.0 (26100.2))

CPU model: Intel(R) Core(TM) Ultra 9 185H, instruction set [SSE2|AVX|AVX2]
Thread count: 16 physical cores, 22 logical processors, using up to 22 threads

Optimize a model with 1003 rows, 30370 columns and 10302786 nonzeros
Model fingerprint: 0xa4fbee09
Variable types: 1 continuous, 30369 integer (30369 binary)
Coefficient statistics:
  Matrix range     [1e+00, 2e+08]
  Objective range  [1e+00, 3e+03]
  Bounds range     [1e+00, 1e+00]
  RHS range        [5e+01, 1e+08]
Warning: Model contains large matrix coefficients
         Consider reformulating model or setting NumericFocus parameter
         to avoid numerical issues.

User MIP start produced solution with objective 7.01657e+06 (2.25s)
Loaded user MIP start with objective 7.01657e+06
Processed MIP start in 2.23 seconds (0.95 work units)

Presolve removed 1001 rows and 1001 columns
Presolve time: 1.88s
Presolved: 2 rows, 29369 columns, 58738 nonzeros
Variable types: 0 continuous, 29369 integer (29369 binary)
Found heuristic solution: objective 7283784.2164

Starting sifting (using dual simplex for sub-problems)...

    Iter     Pivots    Primal Obj      Dual Obj        Time
       0          0     infinity     -8.5954234e+06      4s
       1          1  -1.0939240e+05  -8.5461998e+06      4s
       2          3  -1.3438183e+05  -8.5297172e+06      4s
       3          5  -1.8822504e+05  -8.5227263e+06      4s
       4          7  -2.1502998e+05  -8.5162448e+06      4s
       5          9  -2.6694422e+05  -8.5105148e+06      4s
       6         11  -3.1011424e+05  -8.5063219e+06      4s
       7         13  -3.4598473e+05  -8.5027436e+06      4s
       8         15  -3.7983946e+05  -8.4994864e+06      4s
       9         17  -4.1301854e+05  -8.4971532e+06      4s
      10         19  -4.4834645e+05  -8.4944963e+06      4s
      11         21  -4.8769815e+05  -8.4924081e+06      4s
      12         23  -5.2353089e+05  -8.4903439e+06      4s
      13         25  -5.6559651e+05  -8.4875771e+06      4s
      14         27  -6.2374219e+05  -8.4851169e+06      4s
      15         29  -6.9229155e+05  -8.4833902e+06      4s
      16         31  -7.4067974e+05  -8.4817202e+06      4s
      17         33  -7.9618193e+05  -8.4802313e+06      4s
      18         35  -8.3944338e+05  -8.4781641e+06      4s
      19         37  -9.0488706e+05  -8.4757665e+06      4s
      20         39  -9.6948627e+05  -8.4735416e+06      4s
      21         41  -1.0366669e+06  -8.4713711e+06      4s
      22         43  -1.1075983e+06  -8.4689240e+06      4s
      23         45  -1.1876166e+06  -8.4668946e+06      4s
      24         47  -1.2650869e+06  -8.4644744e+06      4s
      25         49  -1.3537151e+06  -8.4623352e+06      4s
      26         51  -1.4380471e+06  -8.4602487e+06      4s
      27         53  -1.5182690e+06  -8.4583143e+06      4s
      28         55  -1.6024285e+06  -8.4563366e+06      4s
      29         57  -1.6864300e+06  -8.4543667e+06      4s
      30         59  -1.7730984e+06  -8.4524107e+06      4s
      31         61  -1.8757160e+06  -8.4505185e+06      4s
      32         63  -1.9832589e+06  -8.4489934e+06      4s
      33         65  -2.0609758e+06  -8.4470407e+06      4s
      34         67  -2.1849239e+06  -8.4453954e+06      4s
      35         69  -2.2734543e+06  -8.4435278e+06      4s
      36         71  -2.3904212e+06  -8.4417966e+06      4s
      37         73  -2.5010673e+06  -8.4402299e+06      4s
      38         75  -2.6152965e+06  -8.4387511e+06      4s
      39         77  -2.7081939e+06  -8.4372583e+06      4s
      40         79  -2.8321013e+06  -8.4356705e+06      4s
      41         81  -2.9482273e+06  -8.4340800e+06      4s
      42         83  -3.0612090e+06  -8.4325333e+06      4s
      43         85  -3.1986347e+06  -8.4310381e+06      4s
      44         87  -3.3213768e+06  -8.4295375e+06      4s
      45         89  -3.4644936e+06  -8.4281239e+06      4s
      46         91  -3.6011453e+06  -8.4268796e+06      4s
      47         93  -3.7285862e+06  -8.4254399e+06      4s
      48         95  -3.8623207e+06  -8.4239676e+06      4s
      49         97  -3.9861846e+06  -8.4226384e+06      4s

Sifting complete


Root relaxation: objective 8.389622e+06, 106 iterations, 0.22 seconds (0.14 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

      48         95  -3.8623207e+06  -8.4239676e+06      4s
      49         97  -3.9861846e+06  -8.4226384e+06      4s

Sifting complete


Root relaxation: objective 8.389622e+06, 106 iterations, 0.22 seconds (0.14 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

      49         97  -3.9861846e+06  -8.4226384e+06      4s

Sifting complete


Root relaxation: objective 8.389622e+06, 106 iterations, 0.22 seconds (0.14 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time


Sifting complete


Root relaxation: objective 8.389622e+06, 106 iterations, 0.22 seconds (0.14 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

Sifting complete


Root relaxation: objective 8.389622e+06, 106 iterations, 0.22 seconds (0.14 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time


Root relaxation: objective 8.389622e+06, 106 iterations, 0.22 seconds (0.14 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time


    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time


     0     0 8389621.93    0    2 7283784.22 8389621.93  15.2%     -    4s
H    0     0                    8389092.1600 8389621.93  0.01%     -    4s

     0     0 8389621.93    0    2 7283784.22 8389621.93  15.2%     -    4s
H    0     0                    8389092.1600 8389621.93  0.01%     -    4s

Explored 1 nodes (106 simplex iterations) in 4.55 seconds (2.12 work units)
Thread count was 22 (of 22 available processors)

Solution count 3: 8.38909e+06 7.28378e+06 7.01657e+06

Explored 1 nodes (106 simplex iterations) in 4.55 seconds (2.12 work units)
Thread count was 22 (of 22 available processors)

Solution count 3: 8.38909e+06 7.28378e+06 7.01657e+06
Explored 1 nodes (106 simplex iterations) in 4.55 seconds (2.12 work units)
Thread count was 22 (of 22 available processors)

Solution count 3: 8.38909e+06 7.28378e+06 7.01657e+06

Optimal solution found (tolerance 1.00e-04)

Solution count 3: 8.38909e+06 7.28378e+06 7.01657e+06

Optimal solution found (tolerance 1.00e-04)

Optimal solution found (tolerance 1.00e-04)
Best objective 8.389092160022e+06, best bound 8.389621934455e+06, gap 0.0063%

--- Gurobi ç²¾ç¡®æ±‚è§£ç»“æœ ---
âœ… Gurobi é€‰ä¸­å€Ÿæ¬¾äººæ•° = 5000
âœ… Gurobi æŠ•èµ„ç»„åˆæœŸæœ›æ”¶ç›Š = 8389092.16
âœ… Gurobi è®¡ç®—çš„ VaR ä¸Šç•Œ Î· = 47556800.00
\end{lstlisting}
\end{document}
